-- Initial GSW.cabal generated by cabal init.  For further documentation, 
-- see http://haskell.org/cabal/users-guide/

name:                GSW
version:             0.1.0.0
-- synopsis:            
-- description:         
license:             OtherLicense
license-file:        LICENSE
-- author:              
maintainer:          k.katsumata@jamstec.go.jp
-- copyright:           
-- category:            
build-type:          Custom
extra-source-files:  size_r14.f90
                     Makefile
cabal-version:       >=1.10

executable gentoolbox
  main-is: Gentoolbox.hs
  build-depends:       base >=4.7 && <4.8,
                       mtl >= 2.1 && <2.2,
                       transformers >= 0.3 && <0.4,
                       unix-time >= 0.3 && <0.4

  default-language:    Haskell2010
  ld-options:          size_r14.o

library
  exposed-modules:     Oceanogr.GSW,
                       Oceanogr.GSWtools
  other-modules:       Oceanogr.GSWcaller
  other-extensions:    BangPatterns, TypeFamilies, ScopedTypeVariables, ForeignFunctionInterface
  build-depends:       base >=4.7 && <4.8,
                       oceanogr >= 0.1 && <0.2,
                       vector >= 0.10 && <0.11,
                       ieee754 >= 0.7 && <0.8
                    
  default-language:    Haskell2010

--
--
--
--
Test-Suite simpleTool
   type: exitcode-stdio-1.0
   main-is: SimpleToolTest.hs
   build-depends:       base >=4.7 && <4.8,
                        GSW >= 0.1 && <0.2
   default-language:    Haskell2010
   hs-source-dirs: Test
   ld-options:          gsw_oceanographic_toolbox.o -lgfortran
--
----
---- Somehow ld-options: gamma.a does NOT work. I had to
---- extract (by "ar x gamma.a hoge.o") objects to
---- run "cabal test --verbose"
----
--Test-Suite simpleGammaN
--   type: exitcode-stdio-1.0
--   main-is: SimpleGammaNTest.hs
--   build-depends:       base >=4.7 && <4.8,
--                        GSW >= 0.1 && <0.2
--   default-language:    Haskell2010
--   hs-source-dirs: test
--   extra-lib-dirs:      /usr/lib/
--   extra-libraries:     gfortran
--                        netcdff
--   ld-options:          gamma-n.o
--                        neutral-surfaces.o
--                        gamma.a
--

----
---- Again, "cabal test --verbose" works but not "cabal test"
----
--Test-Suite simpleDH
--  type: exitcode-stdio-1.0
--  main-is: SimpleDynamicHeightTest.hs
--  build-depends: base >= 4.7 && <4.8,
--                 GSW >= 0.1 && <0.2,
--                 vector >= 0.10 && <0.11
--  default-language: Haskell2010
--  hs-source-dirs: test
--  extra-libraries:     gfortran
--  ld-options:          gsw_oceanographic_toolbox.o
--

